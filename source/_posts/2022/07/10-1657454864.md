---
title:   使用 Azure Storage、CDN 和 DNS 服务部署静态博客
date:    2022-07-10 20:09:04
updated: 2022-07-10 21:15:34
categories:
    - 生活
    - 折腾
tags:
    - Azure
    - Azure Storage
    - Azure CDN
    - Azure DNS
    - Blog
---

停更的这小半年，我自己身上发生了很多事情，自认为还算坚强地硬撑了过来。

尽管还在阴影之中，没有完全脱离，但是生活还得继续，折腾反而能让我从痛苦的父进程里 fork 出来，在这个只有我自己存在的子进程里，时间的流速也大大加快，这可是我求之不得的事情。

所以，趁着周末我又来折腾了，这次是把之前托管在 GitHub Pages 的静态博客，迁移到了 Azure Storage 和 CDN，顺便迁移了 DNS。

![](https://image.progcz.com/2022/07/10/01.png)

<!-- more -->

## 1 以前的方案

- **博客的 MD 源文件托管在 GitHub 仓库，借助 GitHub Actions 完成 Hexo 的解析，详情可见[这篇文章](/posts/apply-github-actions-to-deploy-hexo-blog/)。**

- **博客的 HTML 文件托管在 GitHub 仓库，自动部署至 GitHub Pages。**毋须多言，从国内访问博客的速度较慢，而且作为一个中文博客，不能被百度收录，白白流失了不少流量~（瞧不上百度，还馋人家流量，有点过分）~。

- **博客的自定义 CSS 和 JS 文件，以及图片都托管在 GitHub 仓库，借助 jsDelivr 分发，后来 jsDelivr 在围城内挂了，于是迁到了 cdnjs 和 Staticaly。**可以看出，这些文件依赖的免费第三方服务是无法得到保障的，因为免费总是意味着会被滥用，随之而来必然是色情暴力政治宗教，所以迟早会被封禁。当然，一些公共的 CSS 和 JS 文件用这些 CDN 服务还是挺香的。

当然，这些缺点在贫穷的我看来都还可以忍受，但架不住**来微软之后，员工每月都有 $150 的 Azure 额度，**本着「不用白不用」的古老智慧，动了这次迁移的念头。

但是说实话，如果不是送的额度，个人用户大概率不会选择 Azure 来搭博客，因为 Azure 主要面向企业用户，主打高可用性，所以 resource 普遍较贵。

Anyway，一个月之后我来补充一下，看看我这小博客能用掉多少钱。

## 2 现在的方案

- 博客和图片的 GitHub 仓库都不变，只是 CI/CD 里多加了几步，把 Hexo 解析后的 HTML 文件上传至 Azure Storage，借助 Azure CDN 分发，再用 Azure DNS 绑上自己的域名。

---

未完待续，困了，明天再写。
